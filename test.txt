*** Settings ***

Library  Selenium2Library  timeout=15  implicit_wait=0.1

Library  OperatingSystem

Suite Setup  Start app and Open Browser

Suite Teardown  Close All Browsers and Processes


*** Variables ***

${PORT} =  8080
${APP_URL} =  http://localhost:${PORT}
${BROWSER} =  Firefox


*** Test Cases ***

Test App
    Location should contain  login
    Page should contain  BB
    Title should be  BB

Test Login Page
    Location should contain  login
    Page should contain  Please enter you credentials
    Page should contain element  name=subdomain
    Page should contain element  name=username
    Page should contain element  name=password
    Input Text  name=subdomain  test
    Click button  Log in
    Page should contain  Please enter all fields!
    Input Text  name=username  test
    Click button  Log in
    Page should contain  Please enter all fields!
    Input Password  name=password  test
    Click button  Log in
    Wait Until Page Contains  First Last

Test Nav Pages
    Test user login
    Wait Until Page Contains  First Last
    Location should be  ${APP_URL}/#projects
    Click link  Companies
    Location should be  ${APP_URL}/#companies
    Click link  To-Dos
    Location should be  ${APP_URL}/#todos
    Click link  Time
    Location should be  ${APP_URL}/#time_report
    Click link  People
    Location should be  ${APP_URL}/#people
    Click link  Projects
    Location should be  ${APP_URL}/#projects

Test My Profile
    Test user login
    Wait Until Page Contains  First Last
    Click link  First Last
    Click link  My profile
    Location should be  ${APP_URL}/#me
    Page should contain element  link=name@domain.com
    Page should contain element  link=example
    Page should contain  Mobile phone: +000 (00) 000-0000
    Page should contain  Home phone: +000 (00) 000-0001
    Page should contain  Fax phone: +000 (00) 000-0002
    Page should contain  Time zone: Europe/Kiev 


*** Keywords ***

Start app and Open Browser
    Start Process  make
    Open browser  ${APP_URL}
    Maximize browser window

Close All Browsers and Processes
    Close All Browsers
    Stop All Processes

Test user login
    Location should contain  login
    Input Text  name=subdomain  test
    Input Text  name=username  test
    Input Password  name=password  test
    Click button  Log in
    Wait Until Page Contains  Projects

