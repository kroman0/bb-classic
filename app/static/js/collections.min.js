!function(t,e){"use strict";"function"==typeof t.define&&t.define.amd?t.define("bbcollections",["underscore","backbone","backbonepageable","bbmodels"],e):t.bbcollections=e(t._,t.Backbone,t.Backbone.PageableCollection,t.bbmodels)}(this,function(t,e,i,n){"use strict";var s={},o=e.$,r=function(){e.history.loadUrl(),o(".spinner").addClass("off")},l=e.Collection.prototype.fetch,a={initialize:function(){this.on("reset",r),this.on("remove",r),this.on("reset",r)},fetch:function(t){return o(".spinner").removeClass("off"),l.call(this,t)},fetchonce:function(){var t=this.fetched;return t||(this.fetched=!0,this.fetch({cache:!0,reset:!0})),t},get_or_create:function(t){return this[t]||(this[t]=this.clone(),this[t].parent_id=t,this[t].on("reset",r)),this[t]}},p=e.Collection.extend(a),d=i.extend(a),m=p.extend({parent_id:null}),c=d.extend({mode:"client",parent_id:null});return s.Projects=p.extend({url:"/api/projects.xml",model:n.Project}),s.Companies=p.extend({url:"/api/companies.xml",model:n.Company}),s.People=m.extend({url:function(){return t.isFinite(this.parent_id)?"/api/projects/"+this.parent_id+"/people.xml":"/api/people.xml"},model:n.Person}),s.Posts=m.extend({url:function(){return"/api/projects/"+this.parent_id+"/posts.xml"},model:n.Post}),s.Attachments=c.extend({url:function(){return"/api/projects/"+this.parent_id+"/attachments.xml"},model:n.Attachment}),s.Calendar=m.extend({url:function(){return"/api/projects/"+this.parent_id+"/calendar_entries.xml"},model:n.CalendarEntry}),s.Categories=c.extend({url:function(){return"/api/projects/"+this.parent_id+"/categories.xml"},model:n.Category}),s.TimeEntries=c.extend({parent:"projects",filter_report:null,url:function(){return t.isFinite(this.parent_id)?"/api/"+this.parent+"/"+this.parent_id+"/time_entries.xml":this.filter_report?"/api/time_entries/report.xml?"+e.$.param(this.filter_report):"/api/time_entries/report.xml"},model:n.TimeEntry}),s.TodoTimeEntries=s.TimeEntries.extend({parent:"todo_items"}),s.TodoItems=m.extend({url:function(){return"/api/todo_lists/"+this.parent_id+"/todo_items.xml"},model:n.TodoItem}),s.TodoLists=m.extend({responsible_party:null,filter_status:null,url:function(){return t.isFinite(this.parent_id)&&this.filter_status?"/api/projects/"+this.parent_id+"/todo_lists.xml?filter="+this.filter_status:t.isFinite(this.parent_id)?"/api/projects/"+this.parent_id+"/todo_lists.xml":null===this.responsible_party?"/api/todo_lists.xml":""===this.responsible_party?"/api/todo_lists.xml?responsible_party=":"/api/todo_lists.xml?responsible_party="+this.responsible_party},model:n.TodoList}),s.PostComments=m.extend({parent_type:"posts",url:function(){return"/api/"+this.parent_type+"/"+this.parent_id+"/comments.xml"},model:n.Comment}),s.TodoComments=s.PostComments.extend({parent_type:"todo_items"}),s.CalendarEntryComments=s.PostComments.extend({parent_type:"milestones"}),s});
//# sourceMappingURL=app/static/js/collections.min.js.map