!function(e,t){"use strict";"function"==typeof e.define&&e.define.amd?e.define("bbcollections",["underscore","backbone","backbonepageable","bbmodels"],t):e.bbcollections=t(e._,e.Backbone,e.Backbone.PageableCollection,e.bbmodels)}(this,function(e,t,n,i){"use strict";var o={},r=t.$,s=function(){t.history.loadUrl(),r(".spinner").addClass("off")},l={initialize:function(){this.on("reset",s),this.on("remove",s)},fetchonce:function(){var e=this.fetched;return e||(this.fetched=!0,this.fetch({cache:!0,reset:!0})),e},get_or_create:function(e){return this[e]||(this[e]=this.clone(),this[e].parent_id=e,this[e].on("reset",s),this[e].on("remove",s)),this[e]}},a=t.Collection.extend(l).extend({fetch:function(e){return r(".spinner").removeClass("off"),t.Collection.prototype.fetch.call(this,e)}}),p=n.extend(l).extend({fetch:function(e){return r(".spinner").removeClass("off"),n.prototype.fetch.call(this,e)}}),d=a.extend({parent_id:null}),m=p.extend({mode:"client",parent_id:null});return o.Projects=a.extend({url:"/api/projects.xml",model:i.Project}),o.Companies=a.extend({url:"/api/companies.xml",model:i.Company}),o.People=d.extend({url:function(){return e.isFinite(this.parent_id)?"/api/projects/"+this.parent_id+"/people.xml":"/api/people.xml"},model:i.Person}),o.Posts=d.extend({url:function(){return"/api/projects/"+this.parent_id+"/posts.xml"},model:i.Post}),o.Attachments=m.extend({url:function(){return"/api/projects/"+this.parent_id+"/attachments.xml"},model:i.Attachment}),o.Calendar=d.extend({url:function(){return"/api/projects/"+this.parent_id+"/calendar_entries.xml"},model:i.CalendarEntry}),o.Categories=m.extend({url:function(){return"/api/projects/"+this.parent_id+"/categories.xml"},model:i.Category}),o.TimeEntries=m.extend({parent:"projects",filter_report:null,url:function(){return e.isFinite(this.parent_id)?"/api/"+this.parent+"/"+this.parent_id+"/time_entries.xml":this.filter_report?"/api/time_entries/report.xml?"+t.$.param(this.filter_report):"/api/time_entries/report.xml"},model:i.TimeEntry}),o.TodoTimeEntries=o.TimeEntries.extend({parent:"todo_items"}),o.TodoItems=d.extend({url:function(){return"/api/todo_lists/"+this.parent_id+"/todo_items.xml"},model:i.TodoItem}),o.TodoLists=d.extend({responsible_party:null,filter_status:null,url:function(){return e.isFinite(this.parent_id)&&this.filter_status?"/api/projects/"+this.parent_id+"/todo_lists.xml?filter="+this.filter_status:e.isFinite(this.parent_id)?"/api/projects/"+this.parent_id+"/todo_lists.xml":null===this.responsible_party?"/api/todo_lists.xml":""===this.responsible_party?"/api/todo_lists.xml?responsible_party=":"/api/todo_lists.xml?responsible_party="+this.responsible_party},model:i.TodoList}),o.PostComments=d.extend({parent_type:"posts",url:function(){return"/api/"+this.parent_type+"/"+this.parent_id+"/comments.xml"},model:i.Comment}),o.TodoComments=o.PostComments.extend({parent_type:"todo_items"}),o.CalendarEntryComments=o.PostComments.extend({parent_type:"milestones"}),o});
//# sourceMappingURL=app/static/js/collections.min.js.map