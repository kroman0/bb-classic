!function(e,t){"use strict";if(typeof e.define==="function"&&e.define.amd){e.define("bbmodels",["underscore","backbone"],t)}else{e.bbmodels=t(e._,e.Backbone)}}(this,function(e,t){"use strict";var n={},r=function(){throw new Error('A "url" property or function must be specified')},o=t.Model.extend({mainattr:"name",name:function(){return this.get(this.mainattr)},url:function(){return this.getUrl()},getUrl:function(){var t;if(!this.isNew()){t=e.result(this,"urlRoot")||e.result(this.collection,"url")||r();t=t+(t.charAt(t.length-1)==="/"?"":"/")+encodeURIComponent(this.id)+".xml"}else{t=e.result(this.collection,"url")||r()}return t},sync:function(n,r,o){if(!o.url){switch(n){case"read":case"create":o.url=e.result(r,"url");break;case"update":case"delete":o.url=e.result(r,"getUrl");break;default:break}}return t.sync(n,r,o)}});n.Project=o.extend({urlRoot:"/api/projects/",icon:function(){switch(this.get("status")){case"active":return"icon-play";case"archived":return"icon-stop";case"on_hold":return"icon-pause"}}});n.Company=o.extend({urlRoot:"/api/companies/"});n.Person=o.extend({urlRoot:"/api/people/",name:function(){return this.get("first-name")+" "+this.get("last-name")}});n.Post=o.extend({mainattr:"title",urlRoot:"/api/posts/"});n.Attachment=o.extend();n.CalendarEntry=o.extend({mainattr:"title",urlRoot:"/api/projects/#{project_id}/calendar_entries/"});n.Category=o.extend({urlRoot:"/api/categories/"});n.TimeEntry=o.extend({mainattr:"description",urlRoot:"/api/time_entries/"});n.TodoItem=o.extend({mainattr:"content",urlRoot:"/api/todo_items/",complete:function(){this.save("completed",true,{url:e.result(this,"url").replace(".xml","/complete.xml")})},uncomplete:function(){this.save("completed",false,{url:e.result(this,"url").replace(".xml","/uncomplete.xml")})}});n.TodoList=o.extend({urlRoot:"/api/todo_lists/"});n.Comment=o.extend({mainattr:"body",urlRoot:"/api/comments/"});n.MyModel=n.Person.extend({defaults:{id:null},url:"/api/me.xml"});return n});