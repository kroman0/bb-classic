!function(t,e){"use strict";"function"==typeof t.define&&t.define.amd?t.define("bbmodels",["underscore","backbone"],e):t.bbmodels=e(t._,t.Backbone)}(this,function(t,e){"use strict";var n={},r=function(){throw new Error('A "url" property or function must be specified')},o=e.Model.extend({mainattr:"name",name:function(){return this.get(this.mainattr)},url:function(){return this.getUrl()},getUrl:function(){var e;return this.isNew()?e=t.result(this.collection,"url")||r():(e=t.result(this,"urlRoot")||t.result(this.collection,"url")||r(),e=e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)+".xml"),e},sync:function(n,r,o){if(!o.url)switch(n){case"read":case"create":o.url=t.result(r,"url");break;case"update":case"delete":o.url=t.result(r,"getUrl")}return e.sync(n,r,o)}});return n.Project=o.extend({urlRoot:"/api/projects/"}),n.Company=o.extend({urlRoot:"/api/companies/"}),n.Person=o.extend({urlRoot:"/api/people/",name:function(){return this.get("first-name")+" "+this.get("last-name")}}),n.Post=o.extend({mainattr:"title",urlRoot:"/api/posts/"}),n.Attachment=o.extend(),n.CalendarEntry=o.extend({mainattr:"title",urlRoot:function(){return"/api/projects/"+this.collection.parent_id+"/calendar_entries/"},complete:function(){this.save("completed",!0,{url:t.result(this,"url").replace(".xml","/complete.xml")})},uncomplete:function(){this.save("completed",!1,{url:t.result(this,"url").replace(".xml","/uncomplete.xml")})}}),n.Category=o.extend({urlRoot:"/api/categories/"}),n.TimeEntry=o.extend({mainattr:"description",urlRoot:"/api/time_entries/"}),n.TodoItem=n.CalendarEntry.extend({mainattr:"content",urlRoot:"/api/todo_items/"}),n.TodoList=o.extend({urlRoot:"/api/todo_lists/"}),n.Comment=o.extend({mainattr:"body",urlRoot:"/api/comments/"}),n.MyModel=n.Person.extend({defaults:{id:null},url:"/api/me.xml"}),n});
//# sourceMappingURL=app/static/js/models.min.js.map